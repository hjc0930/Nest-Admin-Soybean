# API 错误码文档

> 本文档列出了系统中所有的错误码及其含义

## 响应格式

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": null,
  "requestId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "timestamp": "2025-01-01T00:00:00.000Z"
}
```

- `code`: 响应码，200 表示成功，其他表示失败
- `msg`: 响应消息
- `data`: 响应数据
- `requestId`: 请求追踪 ID，可用于日志查询
- `timestamp`: 响应时间戳

## 成功

| 错误码 | 错误消息 | 说明 | 解决方案 |
|--------|----------|------|----------|
| 200 | 操作成功 | 请求处理成功 | - |

## 客户端错误 (400-499)

| 错误码 | 错误消息 | 说明 | 解决方案 |
|--------|----------|------|----------|
| 400 | 请求参数错误 | 请求参数格式错误或缺少必要参数 | 检查请求参数是否符合接口要求 |
| 401 | 未授权访问 | 未提供有效的认证信息或认证已过期 | 请重新登录获取新的访问令牌 |
| 403 | 禁止访问 | 当前用户没有访问该资源的权限 | 联系管理员分配相应权限 |
| 404 | 资源不存在 | 请求的资源不存在 | 检查请求的 URL 是否正确 |
| 405 | 请求方法不允许 | - | - |
| 408 | 请求超时 | - | - |
| 409 | 数据冲突 | - | - |
| 410 | 资源已被删除 | - | - |
| 422 | 请求数据无法处理 | - | - |
| 429 | 请求过于频繁 | 请求频率超过限制 | 请稍后再试，或联系管理员调整限流配置 |

## 服务端错误 (500-599)

| 错误码 | 错误消息 | 说明 | 解决方案 |
|--------|----------|------|----------|
| 500 | 服务器内部错误 | 服务器内部发生错误 | 请联系系统管理员查看服务器日志 |
| 501 | 功能未实现 | - | - |
| 502 | 网关错误 | - | - |
| 503 | 服务暂不可用 | 服务暂时不可用，可能正在维护中 | 请稍后再试 |
| 504 | 网关超时 | - | - |

## 通用业务错误 (1000-1999)

| 错误码 | 错误消息 | 说明 | 解决方案 |
|--------|----------|------|----------|
| 1000 | 业务处理失败 | - | - |
| 1001 | 参数验证失败 | 请求参数验证失败，不符合业务规则 | 检查参数值是否符合业务要求 |
| 1002 | 数据不存在 | 请求的数据记录不存在 | 检查数据 ID 是否正确 |
| 1003 | 数据已存在 | 数据已存在，不能重复创建 | 检查是否存在重复数据 |
| 1004 | 数据正在使用中 | 数据正在被使用，无法删除或修改 | 先解除数据的关联关系 |
| 1005 | 操作执行失败 | - | - |

## 认证授权错误 (2000-2999)

| 错误码 | 错误消息 | 说明 | 解决方案 |
|--------|----------|------|----------|
| 2001 | 无效的令牌 | 提供的令牌无效或格式错误 | 请重新登录获取新的访问令牌 |
| 2002 | 令牌已过期 | 访问令牌已过期 | 使用刷新令牌获取新的访问令牌，或重新登录 |
| 2003 | 刷新令牌已过期 | - | - |
| 2004 | 账户已禁用 | 账户已被禁用 | 联系管理员启用账户 |
| 2005 | 账户已锁定 | 账户已被锁定，可能是登录失败次数过多 | 等待锁定时间结束或联系管理员解锁 |
| 2006 | 密码错误 | 密码错误 | 检查密码是否正确，注意大小写 |
| 2007 | 验证码错误 | 验证码错误或已过期 | 刷新验证码后重新输入 |
| 2008 | 权限不足 | 没有执行该操作的权限 | 联系管理员分配相应权限 |

## 用户相关错误 (3000-3999)

| 错误码 | 错误消息 | 说明 | 解决方案 |
|--------|----------|------|----------|
| 3001 | 用户不存在 | 用户不存在 | 检查用户名或用户 ID 是否正确 |
| 3002 | 用户已存在 | 用户名已被使用 | 使用其他用户名 |
| 3003 | 用户已禁用 | - | - |
| 3004 | 密码强度不足 | 密码强度不足，不符合安全要求 | 密码需包含大小写字母、数字和特殊字符，长度至少8位 |
| 3005 | 原密码错误 | 原密码错误 | 检查原密码是否正确 |

## 租户相关错误 (4000-4999)

| 错误码 | 错误消息 | 说明 | 解决方案 |
|--------|----------|------|----------|
| 4001 | 租户不存在 | 租户不存在 | 检查租户 ID 是否正确 |
| 4002 | 租户已禁用 | 租户已被禁用 | 联系平台管理员启用租户 |
| 4003 | 租户已过期 | 租户服务已过期 | 联系平台管理员续费 |
| 4004 | 租户配额已超限 | 租户配额已超限 | 联系平台管理员提升配额 |

## 文件相关错误 (5000-5999)

| 错误码 | 错误消息 | 说明 | 解决方案 |
|--------|----------|------|----------|
| 5001 | 文件不存在 | 文件不存在 | 检查文件路径是否正确 |
| 5002 | 文件类型不允许 | 文件类型不允许上传 | 检查允许的文件类型列表 |
| 5003 | 文件大小超限 | 文件大小超过限制 | 压缩文件或分片上传 |
| 5004 | 文件上传失败 | 文件上传失败 | 检查网络连接，稍后重试 |

## 第三方服务错误 (6000-6999)

| 错误码 | 错误消息 | 说明 | 解决方案 |
|--------|----------|------|----------|
| 6001 | 外部服务调用失败 | 调用外部服务失败 | 检查外部服务是否可用，稍后重试 |
| 6002 | Redis服务异常 | Redis 服务异常 | 检查 Redis 服务状态 |
| 6003 | 数据库服务异常 | 数据库服务异常 | 检查数据库服务状态 |

## 使用示例

### 成功响应

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": {
    "userId": 1,
    "userName": "admin"
  },
  "requestId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "timestamp": "2025-01-01T00:00:00.000Z"
}
```

### 分页响应

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": {
    "rows": [
      { "userId": 1, "userName": "admin" },
      { "userId": 2, "userName": "test" }
    ],
    "total": 100,
    "pageNum": 1,
    "pageSize": 10,
    "pages": 10
  },
  "requestId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "timestamp": "2025-01-01T00:00:00.000Z"
}
```

### 错误响应

```json
{
  "code": 2006,
  "msg": "密码错误",
  "data": null,
  "requestId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "timestamp": "2025-01-01T00:00:00.000Z"
}
```

## API 接口

系统提供了以下接口用于获取错误码文档：

- `GET /api/system/docs/error-codes` - 获取所有错误码列表
- `GET /api/system/docs/error-codes/by-category` - 按分类获取错误码
- `GET /api/system/docs/error-codes/markdown` - 获取 Markdown 格式文档
- `GET /api/system/docs/error-codes/json` - 获取 JSON 格式文档
